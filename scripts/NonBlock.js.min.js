"use strict";(n=>{window.NonBlockJs={NonBlock:n},document.body?window.NonBlockJs.nonBlock=new n(document.body):document.addEventListener("DOMContentLoaded",()=>{window.NonBlockJs.nonBlock=new n(document.body)})})((()=>{class n{constructor(n,t){this.root=n;const i=window.getComputedStyle(document.body);this.pointerEventsSupport=i.pointerEvents&&i.pointerEvents==="auto";this.regexOn=/^on/;this.regexMouseEvents=/^(dbl)?click$|^mouse(move|down|up|over|out|enter|leave)$|^contextmenu$/;this.regexUiEvents=/^(focus|blur|select|change|reset)$|^key(press|down|up)$/;this.regexHtmlEvents=/^(scroll|resize|(un)?load|abort|error)$/;this.useEventConstructors=!0;try{const n=new MouseEvent("click")}catch(r){this.useEventConstructors=!1}this.mode=typeof t=="undefined"?this.pointerEventsSupport?"PointerEvents":"EventForwarding":t;this["init"+this.mode]&&this["init"+this.mode]()}initPointerEvents(){this.addCSS(`.nonblock{transition:opacity .3s ease; pointer-events: none;}.nonblock:hover,.nonblock-hover{opacity:.1 !important;}`);this.onmousemove=n=>{const t=document.querySelectorAll(".nonblock");for(let t of t){const i=t.getBoundingClientRect();n.clientX>=i.left&&n.clientX<=i.right&&n.clientY>=i.top&&n.clientY<=i.bottom?t.classList.contains("nonblock-hover")?this.isSimulateMouse(t)&&n.isTrusted&&this.domEvent(t,"onmousemove",n,!0):(t.classList.add("nonblock-hover"),this.isSimulateMouse(t)&&n.isTrusted&&(this.domEvent(t,"onmouseenter",n,!1),this.domEvent(t,"onmouseover",n,!0))):t.classList.contains("nonblock-hover")&&(this.isSimulateMouse(t)&&n.isTrusted&&(this.domEvent(t,"onmouseout",n,!0),this.domEvent(t,"onmouseleave",n,!1)),t.classList.remove("nonblock-hover"))}};this.root.addEventListener("mousemove",this.onmousemove)}initEventForwarding(){this.addCSS(`.nonblock{transition:opacity .3s ease;}
.nonblock:hover{opacity:.1 !important;}
.nonblock-hide{position:absolute !important;left:-10000000px !important;right:10000000px !important;}
.nonblock-cursor-auto{cursor:auto !important;}
.nonblock-cursor-default{cursor:default !important;}
.nonblock-cursor-none{cursor:none !important;}
.nonblock-cursor-context-menu{cursor:context-menu !important;}
.nonblock-cursor-help{cursor:help !important;}
.nonblock-cursor-pointer{cursor:pointer !important;}
.nonblock-cursor-progress{cursor:progress !important;}
.nonblock-cursor-wait{cursor:wait !important;}
.nonblock-cursor-cell{cursor:cell !important;}
.nonblock-cursor-crosshair{cursor:crosshair !important;}
.nonblock-cursor-text{cursor:text !important;}
.nonblock-cursor-vertical-text{cursor:vertical-text !important;}
.nonblock-cursor-alias{cursor:alias !important;}
.nonblock-cursor-copy{cursor:copy !important;}
.nonblock-cursor-move{cursor:move !important;}
.nonblock-cursor-no-drop{cursor:no-drop !important;}
.nonblock-cursor-not-allowed{cursor:not-allowed !important;}
.nonblock-cursor-all-scroll{cursor:all-scroll !important;}
.nonblock-cursor-col-resize{cursor:col-resize !important;}
.nonblock-cursor-row-resize{cursor:row-resize !important;}
.nonblock-cursor-n-resize{cursor:n-resize !important;}
.nonblock-cursor-e-resize{cursor:e-resize !important;}
.nonblock-cursor-s-resize{cursor:s-resize !important;}
.nonblock-cursor-w-resize{cursor:w-resize !important;}
.nonblock-cursor-ne-resize{cursor:ne-resize !important;}
.nonblock-cursor-nw-resize{cursor:nw-resize !important;}
.nonblock-cursor-se-resize{cursor:se-resize !important;}
.nonblock-cursor-sw-resize{cursor:sw-resize !important;}
.nonblock-cursor-ew-resize{cursor:ew-resize !important;}
.nonblock-cursor-ns-resize{cursor:ns-resize !important;}
.nonblock-cursor-nesw-resize{cursor:nesw-resize !important;}
.nonblock-cursor-nwse-resize{cursor:nwse-resize !important;}
.nonblock-cursor-zoom-in{cursor:zoom-in !important;}
.nonblock-cursor-zoom-out{cursor:zoom-out !important;}
.nonblock-cursor-grab{cursor:grab !important;}
.nonblock-cursor-grabbing{cursor:grabbing !important;}`);this.nonBlockLastElem=null;this.isOverTextNode=!1;this.selectingText=!1;this.onmouseenter=n=>{let t;n.isTrusted&&(t=this.getNonBlocking(n.target))&&(this.nonBlockLastElem=!1,this.isPropagating(t)||n.stopPropagation())};this.onmouseleave=n=>{let t;n.isTrusted&&(t=this.getNonBlocking(n.target))&&(this.remCursor(t),this.nonBlockLastElem=null,this.selectingText=!1,this.isPropagating(t)||n.stopPropagation())};this.onmouseover=n=>{let t;n.isTrusted&&(t=this.getNonBlocking(n.target))&&!this.isPropagating(t)&&n.stopPropagation()};this.onmouseout=n=>{let t;n.isTrusted&&(t=this.getNonBlocking(n.target))&&!this.isPropagating(t)&&n.stopPropagation()};this.onmousemove=n=>{let t;n.isTrusted&&(t=this.getNonBlocking(n.target))&&(this.nonblockPass(t,n,"onmousemove"),this.selectingText===null?(window.getSelection().removeAllRanges(),this.selectingText=!0):this.selectingText&&n.preventDefault(),this.isPropagating(t)||n.stopPropagation())};this.onmousedown=n=>{let t;n.isTrusted&&(t=this.getNonBlocking(n.target))&&(this.nonblockPass(t,n,"onmousedown"),this.selectingText=null,this.isFocusable(t)||n.preventDefault(),this.isPropagating(t)&&this.isActionPropagating(t)||n.stopPropagation())};this.onmouseup=n=>{let t;n.isTrusted&&(t=this.getNonBlocking(n.target))&&(this.nonblockPass(t,n,"onmouseup"),this.selectingText===null&&window.getSelection().removeAllRanges(),this.selectingText=!1,this.isPropagating(t)&&this.isActionPropagating(t)||n.stopPropagation())};this.onclick=n=>{let t;n.isTrusted&&(t=this.getNonBlocking(n.target))&&(this.nonblockPass(t,n,"onclick"),this.isPropagating(t)&&this.isActionPropagating(t)||n.stopPropagation())};this.ondblclick=n=>{let t;n.isTrusted&&(t=this.getNonBlocking(n.target))&&(this.nonblockPass(t,n,"ondblclick"),this.isPropagating(t)&&this.isActionPropagating(t)||n.stopPropagation())};this.root.addEventListener("mouseenter",this.onmouseenter,!0);this.root.addEventListener("mouseleave",this.onmouseleave,!0);this.root.addEventListener("mouseover",this.onmouseover,!0);this.root.addEventListener("mouseout",this.onmouseout,!0);this.root.addEventListener("mousemove",this.onmousemove,!0);this.root.addEventListener("mousedown",this.onmousedown,!0);this.root.addEventListener("mouseup",this.onmouseup,!0);this.root.addEventListener("click",this.onclick,!0);this.root.addEventListener("dblclick",this.ondblclick,!0)}destroy(){for(let n of["mouseenter","mouseleave","mouseover","mouseout","mousemove","mousedown","mouseup","click","dblclick"])this["on"+n]&&(this.root.removeEventListener(n,this["on"+n],!0),delete this["on"+n]);this.styling.parentNode.removeChild(this.styling);delete this.styling}addCSS(n){this.styling=document.createElement("style");this.styling.setAttribute("type","text/css");this.styling.styleSheet?this.styling.styleSheet.cssText=n:this.styling.appendChild(document.createTextNode(n));document.getElementsByTagName("head")[0].appendChild(this.styling)}domEvent(n,t,i,r){let u;if(t=t.toLowerCase(),this.useEventConstructors){if(t=t.replace(this.regexOn,""),t.match(this.regexMouseEvents)?u=new MouseEvent(t,{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,altKey:i.altKey,metaKey:i.metaKey,button:i.button,buttons:i.buttons,relatedTarget:i.relatedTarget,region:i.region,detail:i.detail,view:i.view,bubbles:r===undefined?i.bubbles:r,cancelable:i.cancelable,composed:i.composed}):t.match(this.regexUiEvents)?u=new UIEvent(t,{detail:i.detail,view:i.view,bubbles:r===undefined?i.bubbles:r,cancelable:i.cancelable,composed:i.composed}):t.match(this.regexHtmlEvents)&&(u=new Event(t,{bubbles:r===undefined?i.bubbles:r,cancelable:i.cancelable,composed:i.composed})),!u)return;n.dispatchEvent(u)}else if(document.createEvent&&n.dispatchEvent){if(t=t.replace(this.regexOn,""),t.match(this.regexMouseEvents)?(n.getBoundingClientRect(),u=document.createEvent("MouseEvents"),u.initMouseEvent(t,r===undefined?i.bubbles:r,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget)):t.match(this.regexUiEvents)?(u=document.createEvent("UIEvents"),u.initUIEvent(t,r===undefined?i.bubbles:r,i.cancelable,i.view,i.detail)):t.match(this.regexHtmlEvents)&&(u=document.createEvent("HTMLEvents"),u.initEvent(t,r===undefined?i.bubbles:r,i.cancelable)),!u)return;n.dispatchEvent(u)}else t.match(this.regexOn)||(t="on"+t),u=document.createEventObject(i),n.fireEvent(t,u)}nonblockPass(n,t,i){n.classList.add("nonblock-hide");const u=document.elementFromPoint(t.clientX,t.clientY);this.nonBlockLastElem===!1&&(this.nonBlockLastElem=u);let r,e,s,h,f;document.caretPositionFromPoint?(r=document.caretPositionFromPoint(t.clientX,t.clientY),e=r?r.offsetNode:null,f=r?r.offset:null):document.caretRangeFromPoint&&(r=document.caretRangeFromPoint(t.clientX,t.clientY),e=r?r.endContainer:null,f=r?r.endOffset:null);r&&(s=r.startContainer.textContent.match(/^[\s\n]*/)[0],h=r.startContainer.textContent.replace(/[\s\n]+$/g,""));n.classList.remove("nonblock-hide");let o=this.getCursor(u);if(this.isOverTextNode=!1,o==="auto"&&u.tagName==="A"?o="pointer":r&&(!s.length||f>s.length)&&f<h.length&&(o==="auto"&&(o="text"),this.isOverTextNode=!0),r&&this.selectingText&&f>0){const t=window.getSelection();let n;t.rangeCount===0?(this.selectingText={originContainer:r.startContainer?r.startContainer:e,originOffset:f-1},n=document.createRange(),t.addRange(n)):n=t.getRangeAt(0);e===this.selectingText.originContainer&&f<this.selectingText.originOffset||e.compareDocumentPosition(this.selectingText.originContainer)&Node.DOCUMENT_POSITION_FOLLOWING?(n.setEnd(this.selectingText.originContainer,this.selectingText.originOffset),n.setStart(e,f)):(n.setStart(this.selectingText.originContainer,this.selectingText.originOffset),n.setEnd(e,f))}if(this.setCursor(n,o!=="auto"?o:"default"),!this.nonBlockLastElem||this.nonBlockLastElem!==u){if(this.nonBlockLastElem){const n=this.nonBlockLastElem;n.contains(u)||this.domEvent(n,"mouseleave",t,!1);this.domEvent(n,"mouseout",t,!0);u.contains(n)||this.domEvent(u,"mouseenter",t,!1)}else u.contains(n)||this.domEvent(u,"mouseenter",t,!1);this.domEvent(u,"mouseover",t,!0)}i==="onmousedown"&&(document.activeElement&&document.activeElement.blur(),u.focus({preventScroll:!0}));this.domEvent(u,i,t);this.nonBlockLastElem=u}getNonBlocking(n){let t=n;while(t){if(t.classList&&t.classList.contains("nonblock"))return t;t=t.parentNode}return!1}isPropagating(n){return!n.classList.contains("nonblock-stop-propagation")}isActionPropagating(n){return n.classList.contains("nonblock-allow-action-propagation")}isFocusable(n){return n.classList.contains("nonblock-allow-focus")}isSimulateMouse(n){return!n.classList.contains("nonblock-stop-mouse-simulation")}getCursor(n){const t=window.getComputedStyle(n);return t.getPropertyValue("cursor")}setCursor(n,t){n.classList.contains("nonblock-cursor-"+t)||(this.remCursor(n),n.classList.add("nonblock-cursor-"+t))}remCursor(n){const t=Object.keys(n.classList).map(t=>n.classList[t]);[...t].forEach(t=>{t.indexOf("nonblock-cursor-")===0&&n.classList.remove(t)})}}return n})())